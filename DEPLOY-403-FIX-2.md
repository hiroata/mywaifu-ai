# 403エラー修正のためのファイル構造変更

## 問題点

現在の構成では、以下の問題によって403エラーが発生していると考えられます：

1. **ルートディレクトリ構造の問題**:
   - ビルドファイルがサーバー上で正しい位置に配置されていない
   - インデックスファイル（index.html/index.php）が適切に配置されていない

2. **Apache設定の問題**:
   - .htaccessファイルの設定が不適切または不足している
   - ディレクトリインデックス設定が正しく構成されていない

## 修正内容

### 1. ファイル構造の修正

- **`public/index.html`** ファイルを追加
  - 自動的に `/index.php` にリダイレクトする設定
  - ユーザーフレンドリーなロード中画面を表示

- **`public/index.php`** ファイルを更新
  - Node.jsアプリケーションへのPHPプロキシとして機能
  - すべてのリクエストをNode.jsサーバーに転送

- **`.htaccess`** ファイルをルートディレクトリに追加
  - すべてのリクエストを `/public` ディレクトリに転送

### 2. デプロイ設定の修正

- GitHub Actionsのワークフローを更新
  - ルートディレクトリの `.htaccess` ファイルも転送するように設定
  - ディレクトリ構造を正しく維持

### 3. リダイレクト設定の改善

- **`public/.htaccess`** ファイルを更新
  - インデックスファイルとして `index.html` と `index.php` の両方を設定
  - `.next` ディレクトリへの正しいパス設定

## デプロイ後の確認事項

1. ブラウザで `https://shakedude.com` にアクセスし、アプリケーションが正常に表示されることを確認
2. 任意のルート（例：`https://shakedude.com/login` や `https://shakedude.com/about`）にアクセスし、正しくルーティングされることを確認
3. APIエンドポイント（例：`https://shakedude.com/api/...`）が正常に機能することを確認

## トラブルシューティング

もし403エラーが解消されない場合は、以下を確認してください：

1. **ファイルのパーミッション**: 
   ```bash
   chmod -R 755 public/
   chmod -R 755 .next/
   chmod 644 .htaccess
   chmod 644 public/.htaccess
   ```

2. **Apacheの設定**:
   ロリポップのコントロールパネルでApache設定（.htaccessの有効化など）を確認

3. **ロリポップのサポートに問い合わせ**:
   上記の設定を試してもエラーが継続する場合は、ロリポップのサポートに具体的な質問をする
